============================= test session starts ==============================
platform darwin -- Python 3.13.5, pytest-9.0.2, pluggy-1.6.0 -- /Users/amymona/Desktop/SwapCircle/.venv/bin/python
cachedir: .pytest_cache
rootdir: /Users/amymona/Desktop/SwapCircle/Backend
configfile: pytest.ini
plugins: anyio-4.12.0
collecting ... collected 138 items

tests/test_auth_routes.py::test_get_swap_requests_requires_auth PASSED   [  0%]
tests/test_auth_routes.py::test_get_swap_requests_invalid_token_structure PASSED [  1%]
tests/test_auth_routes.py::test_get_swap_requests_happy_path FAILED      [  2%]
tests/test_auth_routes.py::test_get_swap_history_requires_auth PASSED    [  2%]
tests/test_auth_routes.py::test_get_swap_history_invalid_token_structure PASSED [  3%]
tests/test_auth_routes_comprehensive.py::TestRegister::test_register_success PASSED [  4%]
tests/test_auth_routes_comprehensive.py::TestRegister::test_register_duplicate_email PASSED [  5%]
tests/test_auth_routes_comprehensive.py::TestRegister::test_register_duplicate_username PASSED [  5%]
tests/test_auth_routes_comprehensive.py::TestRegister::test_register_missing_fields PASSED [  6%]
tests/test_auth_routes_comprehensive.py::TestRegister::test_register_invalid_email PASSED [  7%]
tests/test_auth_routes_comprehensive.py::TestLogin::test_login_success PASSED [  7%]
tests/test_auth_routes_comprehensive.py::TestLogin::test_login_invalid_email PASSED [  8%]
tests/test_auth_routes_comprehensive.py::TestLogin::test_login_invalid_password PASSED [  9%]
tests/test_auth_routes_comprehensive.py::TestLogin::test_login_missing_fields PASSED [ 10%]
tests/test_auth_routes_comprehensive.py::TestMe::test_me_success PASSED  [ 10%]
tests/test_auth_routes_comprehensive.py::TestMe::test_me_missing_auth_header PASSED [ 11%]
tests/test_auth_routes_comprehensive.py::TestMe::test_me_invalid_token_format PASSED [ 12%]
tests/test_auth_routes_comprehensive.py::TestMe::test_me_invalid_token PASSED [ 13%]
tests/test_auth_routes_comprehensive.py::TestMe::test_me_user_not_found PASSED [ 13%]
tests/test_auth_routes_comprehensive.py::TestVerifyEmail::test_verify_email_success PASSED [ 14%]
tests/test_auth_routes_comprehensive.py::TestVerifyEmail::test_verify_email_invalid_token PASSED [ 15%]
tests/test_auth_routes_comprehensive.py::TestVerifyEmail::test_verify_email_user_not_found PASSED [ 15%]
tests/test_contact_routes_comprehensive.py::TestSubmitContactForm::test_submit_contact_form_success PASSED [ 16%]
tests/test_contact_routes_comprehensive.py::TestSubmitContactForm::test_submit_contact_form_feedback PASSED [ 17%]
tests/test_contact_routes_comprehensive.py::TestSubmitContactForm::test_submit_contact_form_bug_report PASSED [ 18%]
tests/test_contact_routes_comprehensive.py::TestSubmitContactForm::test_submit_contact_form_missing_fields PASSED [ 18%]
tests/test_contact_routes_comprehensive.py::TestSubmitContactForm::test_submit_contact_form_invalid_email PASSED [ 19%]
tests/test_contact_routes_comprehensive.py::TestSubmitContactForm::test_submit_contact_form_email_failure PASSED [ 20%]
tests/test_credit_routes_comprehensive.py::TestGetBalance::test_get_balance_success PASSED [ 21%]
tests/test_credit_routes_comprehensive.py::TestGetBalance::test_get_balance_no_auth PASSED [ 21%]
tests/test_credit_routes_comprehensive.py::TestAddCredits::test_add_credits_success PASSED [ 22%]
tests/test_credit_routes_comprehensive.py::TestAddCredits::test_add_credits_negative_amount PASSED [ 23%]
tests/test_credit_routes_comprehensive.py::TestAddCredits::test_add_credits_zero_amount PASSED [ 23%]
tests/test_credit_routes_comprehensive.py::TestDeductCredits::test_deduct_credits_success PASSED [ 24%]
tests/test_credit_routes_comprehensive.py::TestDeductCredits::test_deduct_credits_insufficient PASSED [ 25%]
tests/test_credit_routes_comprehensive.py::TestDeductCredits::test_deduct_credits_negative_amount PASSED [ 26%]
tests/test_credit_routes_comprehensive.py::TestGetTransactions::test_get_transactions_success PASSED [ 26%]
tests/test_credit_routes_comprehensive.py::TestGetTransactions::test_get_transactions_no_auth PASSED [ 27%]
tests/test_credit_system.py::TestCreditDeductionOnRequest::test_request_swap_deducts_credits PASSED [ 28%]
tests/test_credit_system.py::TestCreditDeductionOnRequest::test_insufficient_credits PASSED [ 28%]
tests/test_credit_system.py::TestCreditRefundOnCancellation::test_cancel_swap_refunds_credits PASSED [ 29%]
tests/test_credit_system.py::TestCreditRefundOnRejection::test_reject_swap_refunds_credits PASSED [ 30%]
tests/test_credit_system.py::TestPendingRequestLimit::test_pending_request_limit PASSED [ 31%]
tests/test_credit_system.py::TestCreditPrivacy::test_own_profile_shows_credits PASSED [ 31%]
tests/test_credit_system.py::TestCreditPrivacy::test_other_profile_hides_credits PASSED [ 32%]
tests/test_item_routes_comprehensive.py::TestCreateItem::test_create_item_success_json PASSED [ 33%]
tests/test_item_routes_comprehensive.py::TestCreateItem::test_create_item_success_with_images PASSED [ 34%]
tests/test_item_routes_comprehensive.py::TestCreateItem::test_create_item_missing_auth PASSED [ 34%]
tests/test_item_routes_comprehensive.py::TestCreateItem::test_create_item_missing_title PASSED [ 35%]
tests/test_item_routes_comprehensive.py::TestListItems::test_list_items_success PASSED [ 36%]
tests/test_item_routes_comprehensive.py::TestListItems::test_list_items_filter_by_owner PASSED [ 36%]
tests/test_item_routes_comprehensive.py::TestListItems::test_list_items_filter_by_status PASSED [ 37%]
tests/test_item_routes_comprehensive.py::TestListItems::test_list_items_empty PASSED [ 38%]
tests/test_item_routes_comprehensive.py::TestGetItem::test_get_item_success PASSED [ 39%]
tests/test_item_routes_comprehensive.py::TestGetItem::test_get_item_not_found PASSED [ 39%]
tests/test_item_routes_comprehensive.py::TestGetItem::test_get_item_pending_status PASSED [ 40%]
tests/test_item_routes_comprehensive.py::TestUpdateItem::test_update_item_success PASSED [ 41%]
tests/test_item_routes_comprehensive.py::TestUpdateItem::test_update_item_not_owner PASSED [ 42%]
tests/test_item_routes_comprehensive.py::TestUpdateItem::test_update_item_not_found PASSED [ 42%]
tests/test_item_routes_comprehensive.py::TestUpdateItem::test_update_item_with_images PASSED [ 43%]
tests/test_item_routes_comprehensive.py::TestDeleteItem::test_delete_item_success FAILED [ 44%]
tests/test_item_routes_comprehensive.py::TestDeleteItem::test_delete_item_not_found FAILED [ 44%]
tests/test_item_routes_comprehensive.py::TestLockItem::test_lock_item_success PASSED [ 45%]
tests/test_item_routes_comprehensive.py::TestLockItem::test_lock_item_own_item PASSED [ 46%]
tests/test_item_routes_comprehensive.py::TestLockItem::test_lock_item_already_locked PASSED [ 47%]
tests/test_item_routes_comprehensive.py::TestUnlockItem::test_unlock_item_success PASSED [ 47%]
tests/test_item_routes_comprehensive.py::TestUnlockItem::test_unlock_item_not_owner PASSED [ 48%]
tests/test_item_routes_comprehensive.py::TestUnlockItem::test_unlock_item_not_locked PASSED [ 49%]
tests/test_lock_routes.py::test_lock_item_sets_locked_until_and_locked_by FAILED [ 50%]
tests/test_lock_routes.py::test_unlock_clears_locked_metadata FAILED     [ 50%]
tests/test_notification_routes_comprehensive.py::TestGetNotifications::test_get_notifications_success PASSED [ 51%]
tests/test_notification_routes_comprehensive.py::TestGetNotifications::test_get_notifications_unread_only PASSED [ 52%]
tests/test_notification_routes_comprehensive.py::TestGetNotifications::test_get_notifications_no_auth PASSED [ 52%]
tests/test_notification_routes_comprehensive.py::TestGetRecentNotifications::test_get_recent_notifications_success PASSED [ 53%]
tests/test_notification_routes_comprehensive.py::TestGetUnreadCount::test_get_unread_count_success PASSED [ 54%]
tests/test_notification_routes_comprehensive.py::TestMarkNotificationAsRead::test_mark_notification_as_read_success PASSED [ 55%]
tests/test_notification_routes_comprehensive.py::TestMarkNotificationAsRead::test_mark_notification_as_read_not_found PASSED [ 55%]
tests/test_notification_routes_comprehensive.py::TestMarkAllAsRead::test_mark_all_as_read_success PASSED [ 56%]
tests/test_notification_routes_comprehensive.py::TestDeleteNotification::test_delete_notification_success PASSED [ 57%]
tests/test_notification_routes_comprehensive.py::TestDeleteNotification::test_delete_notification_not_found PASSED [ 57%]
tests/test_rating_routes.py::test_give_rating_success FAILED             [ 58%]
tests/test_rating_routes.py::test_give_rating_self_rating FAILED         [ 59%]
tests/test_rating_routes.py::test_get_my_rating_exists FAILED            [ 60%]
tests/test_rating_routes.py::test_get_my_rating_not_exists FAILED        [ 60%]
tests/test_rating_routes.py::test_get_rating_stats FAILED                [ 61%]
tests/test_rating_routes.py::test_auth_service_get_user_id_from_request FAILED [ 62%]
tests/test_rating_routes_comprehensive.py::TestGiveRating::test_give_rating_success PASSED [ 63%]
tests/test_rating_routes_comprehensive.py::TestGiveRating::test_give_rating_self_rating PASSED [ 63%]
tests/test_rating_routes_comprehensive.py::TestGiveRating::test_give_rating_invalid_stars PASSED [ 64%]
tests/test_rating_routes_comprehensive.py::TestGiveRating::test_give_rating_no_auth PASSED [ 65%]
tests/test_rating_routes_comprehensive.py::TestGetMyRating::test_get_my_rating_exists PASSED [ 65%]
tests/test_rating_routes_comprehensive.py::TestGetMyRating::test_get_my_rating_not_exists PASSED [ 66%]
tests/test_rating_routes_comprehensive.py::TestGetRatingStats::test_get_rating_stats_success PASSED [ 67%]
tests/test_rating_routes_comprehensive.py::TestGetRatingStats::test_get_rating_stats_no_ratings PASSED [ 68%]
tests/test_rating_service.py::test_create_or_update_rating_new_rating FAILED [ 68%]
tests/test_rating_service.py::test_create_or_update_rating_update_existing FAILED [ 69%]
tests/test_rating_service.py::test_create_or_update_rating_self_rating FAILED [ 70%]
tests/test_rating_service.py::test_create_or_update_rating_invalid_stars FAILED [ 71%]
tests/test_rating_service.py::test_get_rating_exists FAILED              [ 71%]
tests/test_rating_service.py::test_get_rating_not_exists FAILED          [ 72%]
tests/test_rating_service.py::test_get_user_rating_stats_no_ratings FAILED [ 73%]
tests/test_rating_service.py::test_get_user_rating_stats_with_ratings FAILED [ 73%]
tests/test_rating_service.py::test_delete_rating_exists FAILED           [ 74%]
tests/test_rating_service.py::test_delete_rating_not_exists FAILED       [ 75%]
tests/test_swap_routes_comprehensive.py::TestRequestSwap::test_request_swap_success PASSED [ 76%]
tests/test_swap_routes_comprehensive.py::TestRequestSwap::test_request_swap_own_item PASSED [ 76%]
tests/test_swap_routes_comprehensive.py::TestRequestSwap::test_request_swap_item_not_available PASSED [ 77%]
tests/test_swap_routes_comprehensive.py::TestRequestSwap::test_request_swap_insufficient_credits PASSED [ 78%]
tests/test_swap_routes_comprehensive.py::TestRequestSwap::test_request_swap_duplicate_request PASSED [ 78%]
tests/test_swap_routes_comprehensive.py::TestApproveSwap::test_approve_swap_success PASSED [ 79%]
tests/test_swap_routes_comprehensive.py::TestApproveSwap::test_approve_swap_not_owner PASSED [ 80%]
tests/test_swap_routes_comprehensive.py::TestApproveSwap::test_approve_swap_request_not_found PASSED [ 81%]
tests/test_swap_routes_comprehensive.py::TestApproveSwap::test_approve_swap_request_not_pending PASSED [ 81%]
tests/test_swap_routes_comprehensive.py::TestRejectSwap::test_reject_swap_success PASSED [ 82%]
tests/test_swap_routes_comprehensive.py::TestRejectSwap::test_reject_swap_not_owner PASSED [ 83%]
tests/test_swap_routes_comprehensive.py::TestCancelSwap::test_cancel_swap_success PASSED [ 84%]
tests/test_swap_routes_comprehensive.py::TestCancelSwap::test_cancel_swap_no_request PASSED [ 84%]
tests/test_swap_routes_comprehensive.py::TestGetSwapRequests::test_get_swap_requests_success PASSED [ 85%]
tests/test_swap_routes_comprehensive.py::TestGetSwapRequests::test_get_swap_requests_no_auth PASSED [ 86%]
tests/test_swap_routes_comprehensive.py::TestGetSwapHistory::test_get_swap_history_success PASSED [ 86%]
tests/test_swap_routes_comprehensive.py::TestGetSwapHistory::test_get_swap_history_no_auth PASSED [ 87%]
tests/test_swap_service.py::test_create_swap_request SKIPPED (Integr...) [ 88%]
tests/test_swap_service.py::test_update_swap_request SKIPPED (Integr...) [ 89%]
tests/test_swap_service.py::test_get_requests_for_requester SKIPPED      [ 89%]
tests/test_user_routes_comprehensive.py::TestListUsers::test_list_users_success PASSED [ 90%]
tests/test_user_routes_comprehensive.py::TestGetUserByUsername::test_get_user_by_username_success PASSED [ 91%]
tests/test_user_routes_comprehensive.py::TestGetUserByUsername::test_get_user_by_username_not_found PASSED [ 92%]
tests/test_user_routes_comprehensive.py::TestGetUserById::test_get_user_by_id_success PASSED [ 92%]
tests/test_user_routes_comprehensive.py::TestGetUserById::test_get_user_by_id_not_found PASSED [ 93%]
tests/test_user_routes_comprehensive.py::TestUpdateUser::test_update_user_success PASSED [ 94%]
tests/test_user_routes_comprehensive.py::TestUpdateUser::test_update_user_not_owner PASSED [ 94%]
tests/test_user_routes_comprehensive.py::TestUpdateUser::test_update_user_duplicate_username PASSED [ 95%]
tests/test_user_routes_comprehensive.py::TestUploadProfilePicture::test_upload_profile_picture_success PASSED [ 96%]
tests/test_user_routes_comprehensive.py::TestUploadProfilePicture::test_upload_profile_picture_not_owner PASSED [ 97%]
tests/test_user_routes_comprehensive.py::TestFavorites::test_add_favorite_success PASSED [ 97%]
tests/test_user_routes_comprehensive.py::TestFavorites::test_remove_favorite_success PASSED [ 98%]
tests/test_user_routes_comprehensive.py::TestFavorites::test_get_favorites_success PASSED [ 99%]
tests/test_user_routes_comprehensive.py::TestFavorites::test_add_favorite_not_authorized PASSED [100%]

=================================== FAILURES ===================================
______________________ test_get_swap_requests_happy_path _______________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
___________________ TestDeleteItem.test_delete_item_success ____________________

self = <tests.test_item_routes_comprehensive.TestDeleteItem object at 0x108904b90>
client = <starlette.testclient.TestClient object at 0x10890a270>
mock_item = {'branded': 'Yes', 'category': 'tops', 'condition': 'like_new', 'credits': 2.0, ...}

    def test_delete_item_success(self, client, mock_item):
        """Test deleting an item."""
        with patch("routes.item_routes.storage_service.get_item", new_callable=AsyncMock, return_value=mock_item):
            with patch("routes.item_routes.image_service.delete_image", new_callable=AsyncMock, return_value=None):
                with patch("routes.item_routes.storage_service.delete_item", new_callable=AsyncMock, return_value=None):
                    response = client.delete(f"/items/{mock_item['id']}")
>                   assert response.status_code == 204
E                   assert 401 == 204
E                    +  where 401 = <Response [401 Unauthorized]>.status_code

tests/test_item_routes_comprehensive.py:219: AssertionError
----------------------------- Captured stdout call -----------------------------

================================================================================
[OptionsMiddleware] Request received:
  Method: DELETE
  Path: /items/item123
  Full URL: http://testserver/items/item123
  Origin: None
  Headers: {'host': 'testserver', 'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'testclient'}
  Query params: {}
================================================================================
[OptionsMiddleware] Non-OPTIONS request (DELETE), passing to next handler for /items/item123...
[OptionsMiddleware] ✅ Response status: 401 for DELETE /items/item123
__________________ TestDeleteItem.test_delete_item_not_found ___________________

self = <tests.test_item_routes_comprehensive.TestDeleteItem object at 0x108904cd0>
client = <starlette.testclient.TestClient object at 0x108873bd0>

    def test_delete_item_not_found(self, client):
        """Test deleting a non-existent item."""
        with patch("routes.item_routes.storage_service.get_item", new_callable=AsyncMock, return_value=None):
            response = client.delete("/items/nonexistent")
>           assert response.status_code == 404
E           assert 401 == 404
E            +  where 401 = <Response [401 Unauthorized]>.status_code

tests/test_item_routes_comprehensive.py:225: AssertionError
----------------------------- Captured stdout call -----------------------------

================================================================================
[OptionsMiddleware] Request received:
  Method: DELETE
  Path: /items/nonexistent
  Full URL: http://testserver/items/nonexistent
  Origin: None
  Headers: {'host': 'testserver', 'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'testclient'}
  Query params: {}
================================================================================
[OptionsMiddleware] Non-OPTIONS request (DELETE), passing to next handler for /items/nonexistent...
[OptionsMiddleware] ✅ Response status: 401 for DELETE /items/nonexistent
________________ test_lock_item_sets_locked_until_and_locked_by ________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
______________________ test_unlock_clears_locked_metadata ______________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
___________________________ test_give_rating_success ___________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
_________________________ test_give_rating_self_rating _________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
__________________________ test_get_my_rating_exists ___________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
________________________ test_get_my_rating_not_exists _________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
____________________________ test_get_rating_stats _____________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
__________________ test_auth_service_get_user_id_from_request __________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
___________________ test_create_or_update_rating_new_rating ____________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
_________________ test_create_or_update_rating_update_existing _________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
___________________ test_create_or_update_rating_self_rating ___________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
__________________ test_create_or_update_rating_invalid_stars __________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
____________________________ test_get_rating_exists ____________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
__________________________ test_get_rating_not_exists __________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
____________________ test_get_user_rating_stats_no_ratings _____________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
___________________ test_get_user_rating_stats_with_ratings ____________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
__________________________ test_delete_rating_exists ___________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
________________________ test_delete_rating_not_exists _________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
=============================== warnings summary ===============================
../.venv/lib/python3.13/site-packages/_pytest/config/__init__.py:1428
  /Users/amymona/Desktop/SwapCircle/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py:1428: PytestConfigWarning: Unknown config option: asyncio_mode
  
    self._warn_or_fail_if_strict(f"Unknown config option: {key}\n")

tests/test_auth_routes.py:40
  /Users/amymona/Desktop/SwapCircle/Backend/tests/test_auth_routes.py:40: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.asyncio

tests/test_lock_routes.py:11
  /Users/amymona/Desktop/SwapCircle/Backend/tests/test_lock_routes.py:11: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.asyncio

tests/test_lock_routes.py:37
  /Users/amymona/Desktop/SwapCircle/Backend/tests/test_lock_routes.py:37: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.asyncio

tests/test_rating_routes.py:31
  /Users/amymona/Desktop/SwapCircle/Backend/tests/test_rating_routes.py:31: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.asyncio

tests/test_rating_routes.py:61
  /Users/amymona/Desktop/SwapCircle/Backend/tests/test_rating_routes.py:61: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.asyncio

tests/test_rating_routes.py:78
  /Users/amymona/Desktop/SwapCircle/Backend/tests/test_rating_routes.py:78: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.asyncio

tests/test_rating_routes.py:105
  /Users/amymona/Desktop/SwapCircle/Backend/tests/test_rating_routes.py:105: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.asyncio

tests/test_rating_routes.py:123
  /Users/amymona/Desktop/SwapCircle/Backend/tests/test_rating_routes.py:123: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.asyncio

tests/test_rating_routes.py:145
  /Users/amymona/Desktop/SwapCircle/Backend/tests/test_rating_routes.py:145: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.asyncio

tests/test_rating_service.py:30
  /Users/amymona/Desktop/SwapCircle/Backend/tests/test_rating_service.py:30: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.asyncio

tests/test_rating_service.py:66
  /Users/amymona/Desktop/SwapCircle/Backend/tests/test_rating_service.py:66: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.asyncio

tests/test_rating_service.py:112
  /Users/amymona/Desktop/SwapCircle/Backend/tests/test_rating_service.py:112: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.asyncio

tests/test_rating_service.py:125
  /Users/amymona/Desktop/SwapCircle/Backend/tests/test_rating_service.py:125: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.asyncio

tests/test_rating_service.py:143
  /Users/amymona/Desktop/SwapCircle/Backend/tests/test_rating_service.py:143: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.asyncio

tests/test_rating_service.py:174
  /Users/amymona/Desktop/SwapCircle/Backend/tests/test_rating_service.py:174: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.asyncio

tests/test_rating_service.py:190
  /Users/amymona/Desktop/SwapCircle/Backend/tests/test_rating_service.py:190: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.asyncio

tests/test_rating_service.py:210
  /Users/amymona/Desktop/SwapCircle/Backend/tests/test_rating_service.py:210: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.asyncio

tests/test_rating_service.py:262
  /Users/amymona/Desktop/SwapCircle/Backend/tests/test_rating_service.py:262: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.asyncio

tests/test_rating_service.py:284
  /Users/amymona/Desktop/SwapCircle/Backend/tests/test_rating_service.py:284: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.asyncio

tests/test_swap_service.py:17
  /Users/amymona/Desktop/SwapCircle/Backend/tests/test_swap_service.py:17: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.asyncio

tests/test_swap_service.py:32
  /Users/amymona/Desktop/SwapCircle/Backend/tests/test_swap_service.py:32: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.asyncio

tests/test_swap_service.py:45
  /Users/amymona/Desktop/SwapCircle/Backend/tests/test_swap_service.py:45: PytestUnknownMarkWarning: Unknown pytest.mark.asyncio - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.asyncio

tests/test_auth_routes.py::test_get_swap_requests_requires_auth
  /Users/amymona/Desktop/SwapCircle/Backend/tests/test_auth_routes.py:23: DeprecationWarning: There is no current event loop
    asyncio.get_event_loop().run_until_complete(

tests/test_auth_routes_comprehensive.py::TestRegister::test_register_missing_fields
tests/test_auth_routes_comprehensive.py::TestRegister::test_register_invalid_email
tests/test_auth_routes_comprehensive.py::TestLogin::test_login_missing_fields
tests/test_contact_routes_comprehensive.py::TestSubmitContactForm::test_submit_contact_form_missing_fields
tests/test_contact_routes_comprehensive.py::TestSubmitContactForm::test_submit_contact_form_invalid_email
tests/test_rating_routes_comprehensive.py::TestGiveRating::test_give_rating_invalid_stars
  /Users/amymona/Desktop/SwapCircle/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py:59: DeprecationWarning: 'HTTP_422_UNPROCESSABLE_ENTITY' is deprecated. Use 'HTTP_422_UNPROCESSABLE_CONTENT' instead.
    response = await handler(conn, exc)

tests/test_item_routes_comprehensive.py::TestLockItem::test_lock_item_success
  /Users/amymona/Desktop/SwapCircle/Backend/routes/item_routes.py:683: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    it["locked_until"] = (datetime.utcnow() + timedelta(hours=24)).isoformat()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED tests/test_auth_routes.py::test_get_swap_requests_happy_path - Failed:...
FAILED tests/test_item_routes_comprehensive.py::TestDeleteItem::test_delete_item_success
FAILED tests/test_item_routes_comprehensive.py::TestDeleteItem::test_delete_item_not_found
FAILED tests/test_lock_routes.py::test_lock_item_sets_locked_until_and_locked_by
FAILED tests/test_lock_routes.py::test_unlock_clears_locked_metadata - Failed...
FAILED tests/test_rating_routes.py::test_give_rating_success - Failed: async ...
FAILED tests/test_rating_routes.py::test_give_rating_self_rating - Failed: as...
FAILED tests/test_rating_routes.py::test_get_my_rating_exists - Failed: async...
FAILED tests/test_rating_routes.py::test_get_my_rating_not_exists - Failed: a...
FAILED tests/test_rating_routes.py::test_get_rating_stats - Failed: async def...
FAILED tests/test_rating_routes.py::test_auth_service_get_user_id_from_request
FAILED tests/test_rating_service.py::test_create_or_update_rating_new_rating
FAILED tests/test_rating_service.py::test_create_or_update_rating_update_existing
FAILED tests/test_rating_service.py::test_create_or_update_rating_self_rating
FAILED tests/test_rating_service.py::test_create_or_update_rating_invalid_stars
FAILED tests/test_rating_service.py::test_get_rating_exists - Failed: async d...
FAILED tests/test_rating_service.py::test_get_rating_not_exists - Failed: asy...
FAILED tests/test_rating_service.py::test_get_user_rating_stats_no_ratings - ...
FAILED tests/test_rating_service.py::test_get_user_rating_stats_with_ratings
FAILED tests/test_rating_service.py::test_delete_rating_exists - Failed: asyn...
FAILED tests/test_rating_service.py::test_delete_rating_not_exists - Failed: ...
============ 21 failed, 114 passed, 3 skipped, 31 warnings in 0.33s ============
